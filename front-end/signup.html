<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Signup - MRT App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body class="h-screen flex overflow-hidden">
  <!-- Background -->
  <div class="absolute inset-0 bg-[url('image/bdFlag.png')] bg-cover bg-center opacity-20 z-0"></div>
  
  <!-- Signup Container -->
  <div class="w-1/2 h-full flex items-center justify-center bg-gray-100 relative z-10">
    <div class="w-full max-w-5xl flex bg-white bg-opacity-90 rounded-2xl shadow-2xl overflow-hidden m-8">
      
      <!-- Left Panel -->
      <div class="w-1/2 bg-gradient-to-tr from-[#006a4e] to-[#f42a41] text-white p-8 flex flex-col justify-center">
        <h2 class="text-4xl font-bold mb-4">Welcome!</h2>
        <p class="text-lg mb-8">Join our MRT app community. Already have an account?</p>
        <a href="login.html" class="bg-white text-[#006a4e] py-3 px-6 rounded-full font-bold hover:bg-gray-200 transition text-center hover:-translate-y-1">Sign in</a>
      </div>

      <!-- Right Panel (Signup Form) -->
      <div class="w-1/2 p-8">
        <h2 class="text-3xl font-bold text-[#006a4e] mb-6">Create Account</h2>
        <form id="signupForm">
          <div class="mb-4">
            <label for="username" class="block text-lg font-semibold text-[#006a4e] mb-1">Username</label>
            <input id="username" type="text" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-[#006a4e]" required />
          </div>
          <div class="mb-4">
            <label for="email" class="block text-lg font-semibold text-[#006a4e] mb-1">Email</label>
            <input id="email" type="email" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-[#006a4e]" required />
          </div>
          <div class="mb-4">
            <label for="nid" class="block text-lg font-semibold text-[#006a4e] mb-1">NID Number</label>
            <input id="nid" type="text" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-[#006a4e]" required />
          </div>
          <div class="mb-4">
            <label for="phone" class="block text-lg font-semibold text-[#006a4e] mb-1">Phone Number</label>
            <input id="phone" type="tel" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-[#006a4e]" required />
          </div>
          <div class="mb-4">
            <label for="password" class="block text-lg font-semibold text-[#006a4e] mb-1">Password</label>
            <input id="password" type="password" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-[#006a4e]" required />
          </div>

          <button type="submit" class="w-full bg-[#f42a41] text-white py-3 rounded-md hover:bg-red-600 font-bold transition">
            Create Account
          </button>
        </form>
      </div>
    </div>
  </div>

  <!-- Info Button -->
  <div class="absolute top-6 right-6 z-20 group">
    <button id="infoBtn" class="text-3xl text-white hover:text-[#f42a41] relative">
      <i class="fas fa-info-circle"></i>
      <span class="absolute right-full mr-2 top-1/2 -translate-y-1/2 bg-black text-white text-sm px-3 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap z-50">
        Click here to see video on how to create an account
      </span>
    </button>
  </div>

  <!-- Modal Video Popup -->
  <div id="videoModal" class="fixed inset-0 bg-black bg-opacity-90 hidden items-center justify-center z-50">
    <div class="relative w-[90%] h-[90%]">
      <iframe class="w-full h-full rounded-xl" src="https://www.youtube.com/embed/NU6BqU67Lv8" frameborder="0" allowfullscreen></iframe>
      <button id="closeModal" class="absolute top-2 right-4 text-white text-3xl hover:text-[#f42a41]">&times;</button>
    </div>
  </div>

  <script>
    // Modal logic
    document.getElementById('infoBtn').addEventListener('click', function () {
      document.getElementById('videoModal').classList.remove('hidden');
      document.getElementById('videoModal').classList.add('flex');
    });

    document.getElementById('closeModal').addEventListener('click', function () {
      document.getElementById('videoModal').classList.remove('flex');
      document.getElementById('videoModal').classList.add('hidden');
    });

    // Signup form submit
    document.getElementById('signupForm').addEventListener('submit', async function (e) {
      e.preventDefault();

      const username = document.getElementById('username').value.trim();
      const email = document.getElementById('email').value.trim();
      const nid = document.getElementById('nid').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const password = document.getElementById('password').value;

      try {
        const res = await fetch('http://localhost:3000/api/auth/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ username, email, nid, phone, password, hasPass: false })
        });

        const data = await res.json();

        if (res.ok) {
          alert('✅ Account created successfully! Please login.');
          window.location.href = 'login.html';
        } else {
          alert('❌ ' + data.msg);
        }
      } catch (error) {
        alert('⚠️ Server error');
        console.error(error);
      }
    });
  </script>
</body>
</html>
