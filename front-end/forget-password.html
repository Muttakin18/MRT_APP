<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Forgot Password - MRT App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body class="min-h-screen flex items-center justify-center bg-gradient-to-br from-white to-green-800">

    <div class="bg-white bg-opacity-90 shadow-2xl rounded-2xl p-12 w-full max-w-md">
        <h2 class="text-4xl font-bold mb-10 text-center text-[#006a4e]">Forgot Password?</h2>
        <p class="text-center text-lg text-[#006a4e] mb-8">Enter your email address to receive a One-Time Password (OTP) for password reset.</p>

        <form id="forgotPasswordForm">
            <div class="mb-6">
                <label for="email" class="block text-2xl font-bold text-[#006a4e] mb-2">Email</label>
                <input type="email" id="email" name="email" required
                       class="w-full px-6 py-4 text-lg border rounded-md focus:outline-none focus:ring-2 focus:ring-[#006a4e]" placeholder="Enter your email">
            </div>

            <button type="submit" class="w-full bg-[#f42a41] text-white py-4 text-2xl rounded-md hover:bg-red-700 transition duration-300 font-semibold">Send OTP</button>
        </form>

        <p class="mt-6 text-center text-lg text-[#006a4e]">Remember your password?
            <a href="login.html" class="text-[#f42a41] hover:underline text-2xl">Log in</a>
        </p>
    </div>

    <script>
        document.getElementById("forgotPasswordForm").addEventListener("submit", async function (e) {
            e.preventDefault();

            const email = document.getElementById("email").value;

            try {
                // In a real application, you would send this email to your backend
                // The backend would then generate an OTP, store it, and send it to the user's email.
                // For demonstration, we'll just simulate a successful send.
                const res = await fetch("http://localhost:3000/api/auth/send-otp", { // This endpoint needs to be created on your backend
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ email })
                });

                const data = await res.json();

                if (res.ok) {
                    alert("✅ OTP sent to your email! Please check your inbox.");
                    // Redirect to a page where the user can enter the OTP
                    window.location.href = "verify-otp.html"; // You'll create this next
                } else {
                    alert("❌ " + (data.msg || "Failed to send OTP. Please try again."));
                }
            } catch (err) {
                console.error(err);
                alert("⚠️ Server error. Could not send OTP.");
            }
        });
    </script>

</body>
</html>